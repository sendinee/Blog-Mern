{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\zoema\\\\blog\\\\front-react\\\\src\\\\component\\\\FormCategory.js\";\nimport React from 'react';\nimport { updateRessource, createRessource, deleteRessource, getRessources } from '../services/api_services';\nimport RichTextEditor from 'react-rte';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class FormCategory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    if (props.data) {\n      this.state = Object.assign({\n        image: null\n      }, props.data);\n      this.state.description = RichTextEditor.createValueFromString(this.state.description, \"html\");\n    } else {\n      this.state = {\n        title: \"\",\n        description: RichTextEditor.createEmptyValue(),\n        image: null\n      };\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextProps.data && this.props.data != nextProps.data) {\n      Object.assign(nextState, nextProps.data);\n    }\n\n    return true;\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleFileChange(event) {\n    const {\n      target\n    } = event;\n    const {\n      files\n    } = target;\n\n    if (files && files[0]) {\n      var reader = new FileReader();\n\n      reader.onload = event => {\n        this.setState({\n          image: event.target.result\n        });\n      };\n\n      reader.readAsDataURL(files[0]);\n    }\n  }\n\n  save(e) {\n    e.preventDefault();\n    let categoryData = Object.assign({}, this.state);\n    categoryData.description = categoryData.description.toString('html');\n\n    if (this.props.data) {\n      delete categoryData.__v;\n      delete categoryData._id;\n      categoryData.updated = new Date();\n      updateRessource(\"category\", this.props.data._id, categoryData).then(result => {\n        alert(\"Enregistrement éffectué.\");\n        this.props.refresh();\n      });\n    } else {\n      createRessource(\"category\", categoryData).then(result => {\n        alert(\"Enregistrement éffectué.\");\n        this.props.refresh();\n        this.props.onHide();\n      });\n    }\n  }\n\n  cancel(e) {\n    e.preventDefault();\n    this.props.onHide();\n  }\n\n  delete(e) {\n    e.preventDefault();\n    deleteRessource(\"category\", this.props.data._id).then(result => {\n      alert(\"Suppréssion éffectué.\");\n      this.props.refresh();\n      this.props.onHide();\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      style: {\n        flexDirection: \"row\",\n        display: \"flex\",\n        padding: 10,\n        flex: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexDirection: \"column\",\n          display: \"flex\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: this.state.image ? this.state.image : \"/logo192.png\",\n          alt: \"Logo\",\n          className: \"imagePostLittle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          style: {\n            overflow: \"hidden\",\n            width: \"72px\"\n          },\n          onChange: this.handleFileChange.bind(this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flexDirection: \"column\",\n          display: \"flex\",\n          flex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"title\",\n          value: this.state.title,\n          placeholder: \"title\",\n          onChange: this.onChange.bind(this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(RichTextEditor, {\n          style: {\n            flex: 1\n          },\n          name: \"description\",\n          onChange: value => this.setState({\n            description: value\n          }),\n          value: this.state.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.save.bind(this),\n            children: \"valider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), this.props.data && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.delete.bind(this),\n            children: \"supprimer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.cancel.bind(this),\n            children: \"annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/zoema/blog/front-react/src/component/FormCategory.js"],"names":["React","updateRessource","createRessource","deleteRessource","getRessources","RichTextEditor","FormCategory","Component","constructor","props","data","state","Object","assign","image","description","createValueFromString","title","createEmptyValue","shouldComponentUpdate","nextProps","nextState","onChange","e","setState","target","name","value","handleFileChange","event","files","reader","FileReader","onload","result","readAsDataURL","save","preventDefault","categoryData","toString","__v","_id","updated","Date","then","alert","refresh","onHide","cancel","delete","render","flexDirection","display","padding","flex","overflow","width","bind"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {updateRessource, createRessource, deleteRessource, getRessources } from '../services/api_services';\nimport RichTextEditor from 'react-rte';\n\nexport default class FormCategory extends React.Component {\n    constructor(props){\n        super(props);\n        if(props.data){\n            this.state= Object.assign({image:null},props.data)\n            this.state.description= RichTextEditor.createValueFromString(this.state.description, \"html\");\n        }else{\n            this.state={title:\"\",\n                        description:RichTextEditor.createEmptyValue(), image:null}\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState){\n        if(nextProps.data && this.props.data!= nextProps.data){\n            Object.assign(nextState, nextProps.data);\n        }\n        return true;\n    }\n\n    onChange(e){\n        this.setState({[e.target.name]:e.target.value});\n    }\n\n    handleFileChange(event) {\n        const {target} = event;\n        const {files} = target;    \n        if (files && files[0]) {\n            var reader = new FileReader();\n            reader.onload = event => {\n              this.setState({image:event.target.result});\n            };\n            reader.readAsDataURL(files[0]);\n        }\n    }\n\n    save(e){\n        e.preventDefault();\n        let categoryData = Object.assign({}, this.state);\n        categoryData.description= categoryData.description.toString('html')\n        if(this.props.data){\n            delete categoryData.__v;\n            delete categoryData._id;\n            categoryData.updated= new Date();\n            updateRessource(\"category\", this.props.data._id, categoryData).then(result=>{\n                alert(\"Enregistrement éffectué.\");\n                this.props.refresh();\n            });\n        }else{\n            createRessource(\"category\", categoryData).then(result=>{\n                alert(\"Enregistrement éffectué.\");\n                this.props.refresh();\n                this.props.onHide();\n            });\n        }\n    }\n\n    cancel(e){\n        e.preventDefault();\n        this.props.onHide();\n    }\n\n    delete(e){\n        e.preventDefault();\n        deleteRessource(\"category\", this.props.data._id).then(result=>{\n            alert(\"Suppréssion éffectué.\");\n            this.props.refresh();\n            this.props.onHide();\n        });\n    }\n\n    render() {\n      return (\n        <form style={{flexDirection:\"row\", display:\"flex\", padding:10, flex:1}}>\n            <div style={{flexDirection:\"column\", display:\"flex\"}}>\n                <img src={this.state.image ? this.state.image : \"/logo192.png\"}\n                    alt=\"Logo\"  className={\"imagePostLittle\"}/>\n                <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    style={{overflow:\"hidden\",width: \"72px\"}}\n                    onChange={this.handleFileChange.bind(this)}\n                />\n            </div>\n            <div style={{flexDirection:\"column\", display:\"flex\", flex:1}}>\n                <input name=\"title\" value={this.state.title}\n                    placeholder=\"title\"\n                    onChange={this.onChange.bind(this)}/>\n                <RichTextEditor style={{flex:1}} name=\"description\"\n                    onChange={(value)=>this.setState({description:value})}\n                    value={this.state.description}\n                />\n                <div>\n                    <button onClick={this.save.bind(this)}>\n                        valider\n                    </button>\n                    {this.props.data&&\n                        <button onClick={this.delete.bind(this)}>\n                            supprimer\n                        </button>\n                    }\n                    <button onClick={this.cancel.bind(this)}>\n                        annuler\n                    </button>\n                </div>\n            </div>\n        </form>\n      );\n    }\n}"]},"metadata":{},"sourceType":"module"}